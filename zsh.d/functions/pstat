unlock keys || exit
unlock policystat || exit
cd $HOME/dev/PolicyStat
export REPO=$(pwd)
export PSTAT_DEPLOY=$HOME/vault/policystat/deploy
export VAGRANT_VBOX_MEMORY=5000
export VAGRANT_VBOX_CPU_MAX=1
export VAGRANT_VBOX_GUI=1

function delete_remote_branch {
  g push origin :$1
}
function load_customer_data {
  echo 'drop database dev; CREATE DATABASE `dev` DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;' | mysql -u root 2>/dev/null
  zcat ~/backup.sql.gz | mysql -u root dev
}

function dev {
  ssh devenv -t "$@"
}

function rt {
  dev pstat_test $@
}

function rtm {
  dev pstat_test_mysql $@
}

function selenium {
  dev selenium $@
}

function selenium_new {
  dev selenium_new $@
}

function migrate {
  dev django-admin.py migrate
}

function shell_plus {
  dev django-admin.py shell_plus
}

complete -o nospace -F _nosetests rt
complete -o nospace -F _nosetests rtm
complete -o nospace -F _nosetests selenium
